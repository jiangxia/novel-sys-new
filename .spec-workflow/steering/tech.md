# 技术决策

## 技术架构决策

### 整体架构选择：前后端分离
**决策**：采用 React 前端 + Node.js 后端 + MCP 协议的分离式架构
**理由**：
- 职责清晰：前端专注UI交互，后端专注AI集成和文件处理
- 可扩展性强：支持后续添加更多AI模型和功能
- 开发效率高：前后端可并行开发

### 前端技术栈决策
**核心技术**：React 18 + TypeScript + Vite
**理由**：
- React 18：现代化组件开发，丰富生态
- TypeScript：类型安全，降低bug率
- Vite：快速开发构建，热更新体验好

**状态管理**：Zustand
**理由**：轻量简洁，避免 Redux 的复杂性

**UI框架**：Shadcn/ui + Tailwind CSS
**理由**：
- Shadcn/ui：现代化组件库，符合Apple Style设计
- Tailwind CSS：原子化CSS，快速开发

### 后端技术栈决策
**核心技术**：Node.js + Express
**理由**：
- JavaScript全栈，降低学习成本
- Express简单快速，适合MVP开发
- MCP SDK支持良好

### AI集成决策
**选择**：PromptX MCP + Gemini API
**理由**：
- PromptX MCP：支持用户自定义提示词，灵活性高
- Gemini API：性能优秀，中文支持好
- MCP协议：标准化AI集成，支持多模型切换

### 文件处理决策
**选择**：本地文件系统 + 无数据库
**理由**：
- 数据安全：用户完全掌控数据
- 部署简单：无需数据库配置
- 性能良好：文件IO性能满足需求

## 技术约束

### 性能约束
- AI响应时间：< 3秒
- 页面加载时间：< 2秒
- 文件编辑响应：< 100ms

### 兼容性约束
- 浏览器：Chrome 100+, Firefox 100+, Safari 14+
- Node.js：>= 18.0.0
- 设备：桌面端和移动端

### 安全约束
- API密钥：环境变量存储，不暴露给前端
- 文件处理：仅本地处理，不上传服务器
- 输入验证：防止注入攻击

## 技术风险与应对

### 风险1：MCP连接稳定性
**应对**：实现连接重试机制，超时处理

### 风险2：AI响应延迟
**应对**：异步处理，加载状态提示

### 风险3：文件IO性能
**应对**：文件缓存，按需加载

## 技术债务管理
- 定期代码审查
- 单元测试覆盖率 > 80%
- 性能监控和优化